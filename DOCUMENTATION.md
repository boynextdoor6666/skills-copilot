# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ CinemaHub

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
4. [API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
5. [–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è](#—Å–∏—Å—Ç–µ–º–∞-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
6. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
7. [–ê–Ω–∞–ª–∏—Ç–∏–∫–∞](#–∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
8. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
9. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
10. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)

---

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

### –û–ø–∏—Å–∞–Ω–∏–µ
CinemaHub ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è –¥–ª—è —Ñ–∏–ª—å–º–æ–≤, —Å–µ—Ä–∏–∞–ª–æ–≤ –∏ –∏–≥—Ä —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:
- **–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** ‚Äî –∞–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** ‚Äî –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Ñ–∏–ª—è –≤–∫—É—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ê–≥—Ä–µ–≥–∞—Ü–∏—è –æ—Ü–µ–Ω–æ–∫** ‚Äî –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (Metacritic, IMDb, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ—Ç–∑—ã–≤—ã)
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑** ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –ª—é–±–∏–º—ã—Ö –∫—Ä–∏—Ç–∏–∫–æ–≤
- **–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö

### –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
- –ö–∏–Ω–æ–º–∞–Ω—ã –∏ –≥–µ–π–º–µ—Ä—ã, –∏—â—É—â–∏–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
- –ö—Ä–∏—Ç–∏–∫–∏ –∏ —Ä–µ—Ü–µ–Ω–∑–µ–Ω—Ç—ã
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∏ –º–µ–¥–∏–∞-–∏–Ω–¥—É—Å—Ç—Ä–∏–∏
- –°–æ–∑–¥–∞—Ç–µ–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
**Frontend:**
- React 18+ (Vite)
- TailwindCSS
- Axios
- React Router
- Context API

**Backend:**
- NestJS (Node.js 18+)
- TypeORM
- MySQL 8.0+
- Winston (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- JWT (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)

**–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:**
- Apache Kafka
- PySpark
- ClickHouse
- Docker Compose

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ö–ª–∏–µ–Ω—Ç        ‚îÇ
‚îÇ  (React SPA)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ HTTP/HTTPS
         ‚îÇ REST API
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  NestJS API     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   MySQL DB   ‚îÇ
‚îÇ  (Port 8080)    ‚îÇ      ‚îÇ  (Port 3306) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ Events
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Kafka         ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  ClickHouse  ‚îÇ
‚îÇ  (Port 9092)    ‚îÇ      ‚îÇ(Port 8123)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚ñ≤
         ‚îÇ PySpark
         ‚îÇ Processing
```

### –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Layered Architecture)

#### 1. Presentation Layer (–°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è)
- **React Components** ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Pages** ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Context API** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **Routing** ‚Äî –Ω–∞–≤–∏–≥–∞—Ü–∏—è

#### 2. API Layer (–°–ª–æ–π API)
- **Controllers** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **Guards** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **Interceptors** ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **Middleware** ‚Äî request-id, CORS

#### 3. Business Logic Layer (–°–ª–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏)
- **Services** ‚Äî –±–∏–∑–Ω–µ—Å-–æ–ø–µ—Ä–∞—Ü–∏–∏
- **DTOs** ‚Äî –æ–±—ä–µ–∫—Ç—ã –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
- **Validators** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### 4. Data Access Layer (–°–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º)
- **TypeORM Entities** ‚Äî –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- **Repositories** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ë–î
- **Stored Procedures** ‚Äî —Å–ª–æ–∂–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ –ë–î
- **Triggers** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

#### 5. Infrastructure Layer (–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–ª–æ–π)
- **Logger** ‚Äî Winston —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
- **Event Bus** ‚Äî Kafka –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **External APIs** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (TMDB, IGDB, etc.)

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ:**
- Node.js 18.0+
- MySQL 8.0+
- 4 GB RAM
- 10 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:**
- Node.js 20.0+
- MySQL 8.0+
- 8 GB RAM
- 20 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- Docker (–¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Backend

```powershell
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd "C:\Users\user\Desktop\Course work (agregator)"

# 2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É backend
cd movie-aggregator-backend-nest

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
copy .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª (—Å–º. —Ä–∞–∑–¥–µ–ª –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

# 5. –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç—ã –∏–∑ –ø–∞–ø–∫–∏ database/

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
npm run migration:run

# 7. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
npm run seed:dev

# 8. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run start:dev

# 9. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–µ
npm run build
npm run start
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Frontend

```powershell
# 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É frontend
cd movie-aggregator-frontend

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
copy .env.example .env
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ VITE_API_URL=http://localhost:8080

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# 5. –°–æ–±—Ä–∞—Ç—å –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
npm run build
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Backend (.env)

```env
# –°–µ—Ä–≤–µ—Ä
NODE_ENV=development
PORT=8080

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MySQL
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASS=your_password
DB_NAME=warehouse

# JWT
JWT_SECRET=your_jwt_secret_key_here
JWT_EXPIRES=7d

# CORS
CORS_ORIGINS=http://localhost:5173,http://localhost:5174,http://localhost:3000

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_TO_FILES=true
LOG_DIR=./logs
LOG_LEVEL=info
LOG_RETENTION_DAYS_INFO=14
LOG_RETENTION_DAYS_ERROR=30
LOG_RETENTION_DAYS_AUDIT=90

# Kafka (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏)
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=cinemahub-backend
KAFKA_ENABLED=false

# ClickHouse (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=8123
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DATABASE=analytics

# External APIs (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
TMDB_API_KEY=your_tmdb_api_key
IGDB_CLIENT_ID=your_igdb_client_id
IGDB_CLIENT_SECRET=your_igdb_client_secret
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Frontend (.env)

```env
VITE_API_URL=http://localhost:8080
VITE_APP_NAME=CinemaHub
VITE_APP_VERSION=1.0.0
```

---

## API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ë–∞–∑–æ–≤—ã–π URL
```
http://localhost:8080/api
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
```
Authorization: Bearer <token>
```

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### üîê Auth (–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)

**POST /api/auth/register**
```json
// Request
{
  "username": "user123",
  "email": "user@example.com",
  "password": "SecurePass123!"
}

// Response 201
{
  "user": {
    "id": 1,
    "username": "user123",
    "email": "user@example.com",
    "role": "user"
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**POST /api/auth/login**
```json
// Request
{
  "username": "user123",
  "password": "SecurePass123!"
}

// Response 200
{
  "user": {
    "id": 1,
    "username": "user123",
    "role": "user"
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**GET /api/auth/validate** üîí
```json
// Headers: Authorization: Bearer <token>
// Response 200
{
  "valid": true,
  "user": {
    "id": 1,
    "username": "user123",
    "role": "user"
  }
}
```

#### üé¨ Content (–ö–æ–Ω—Ç–µ–Ω—Ç)

**GET /api/content**
```
Query Parameters:
- type: movie | series | game
- limit: number (default: 50)

Response 200:
[
  {
    "id": 1,
    "title": "–î—é–Ω–∞: –ß–∞—Å—Ç—å –≤—Ç–æ—Ä–∞—è",
    "type": "movie",
    "year": 2024,
    "rating": 8.7,
    "metascore": 79,
    "poster_url": "https://...",
    "director": "–î–µ–Ω–∏ –í–∏–ª—å–Ω—ë–≤",
    "cast": ["–¢–∏–º–æ—Ç–∏ –®–∞–ª–∞–º–µ", "–ó–µ–Ω–¥–∞—è"]
  }
]
```

**GET /api/content/:id**
```
Response 200:
{
  "id": 1,
  "title": "–î—é–Ω–∞: –ß–∞—Å—Ç—å –≤—Ç–æ—Ä–∞—è",
  "type": "movie",
  "year": 2024,
  "rating": 8.7,
  "metascore": 79,
  "userScore": 8.9,
  "description": "–ü–æ–ª –ê—Ç—Ä–µ–π–¥–µ—Å –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å –ß–∞–Ω–∏...",
  "director": "–î–µ–Ω–∏ –í–∏–ª—å–Ω—ë–≤",
  "director_photo_url": "https://...",
  "cast": ["–¢–∏–º–æ—Ç–∏ –®–∞–ª–∞–º–µ", "–ó–µ–Ω–¥–∞—è"],
  "cast_photos": ["https://...", "https://..."],
  "genres": ["Sci-Fi", "Adventure"],
  "reviews_count": 1243,
  "positive_reviews": 45,
  "mixed_reviews": 8,
  "negative_reviews": 2
}
```

**GET /api/content/search**
```
Query Parameters:
- q: string (–ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å)
- type: movie | series | game | all
- genre: string
- year: number
- minRating: number
- limit: number
- offset: number

Response 200:
{
  "results": [...],
  "total": 150,
  "page": 1,
  "limit": 20
}
```

**GET /api/content/autocomplete**
```
Query Parameters:
- q: string (–º–∏–Ω. 2 —Å–∏–º–≤–æ–ª–∞)
- limit: number (default: 10)

Response 200:
[
  {
    "id": 1,
    "title": "–î—é–Ω–∞: –ß–∞—Å—Ç—å –≤—Ç–æ—Ä–∞—è",
    "type": "movie",
    "year": 2024
  }
]
```

**GET /api/content/stats**
```
Response 200:
{
  "totalMovies": 1543,
  "totalSeries": 892,
  "totalGames": 2341,
  "totalUsers": 75234,
  "totalReviews": 123456
}
```

**GET /api/content/:id/emotional-cloud**
```
Response 200:
{
  "emotions": [
    { "emotion": "–í–æ—Å—Ç–æ—Ä–≥", "count": 543, "percentage": 45.2 },
    { "emotion": "–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ", "count": 321, "percentage": 26.7 },
    { "emotion": "–ì—Ä—É—Å—Ç—å", "count": 198, "percentage": 16.5 }
  ]
}
```

**GET /api/content/:id/perception-map**
```
Response 200:
{
  "plot": 8.5,
  "acting": 9.2,
  "visuals": 9.8,
  "soundtrack": 8.7,
  "dialogues": 8.3,
  "pacing": 7.9
}
```

**GET /api/content/:id/dynamics**
```
Response 200:
{
  "timeline": [
    { "date": "2024-03-01", "rating": 8.2, "reviews": 234 },
    { "date": "2024-03-08", "rating": 8.5, "reviews": 567 },
    { "date": "2024-03-15", "rating": 8.7, "reviews": 891 }
  ]
}
```

**POST /api/content** üîí (Admin only)
```json
// Request
{
  "title": "–ù–æ–≤—ã–π —Ñ–∏–ª—å–º",
  "type": "movie",
  "year": 2025,
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ...",
  "director": "–†–µ–∂–∏—Å—Å—ë—Ä",
  "cast": ["–ê–∫—Ç—ë—Ä 1", "–ê–∫—Ç—ë—Ä 2"],
  "genres": ["Action", "Drama"]
}

// Response 201
{
  "id": 1234,
  "title": "–ù–æ–≤—ã–π —Ñ–∏–ª—å–º",
  ...
}
```

**PUT /api/content/:id** üîí (Admin only)
```json
// Request
{
  "title": "–û–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
  "rating": 8.5
}

// Response 200
{
  "id": 1234,
  "title": "–û–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
  ...
}
```

**DELETE /api/content/:id** üîí (Admin only)
```
Response 200:
{
  "message": "Content deleted successfully"
}
```

#### üìù Reviews (–û—Ç–∑—ã–≤—ã)

**POST /api/reviews** üîí
```json
// Request
{
  "contentId": 1,
  "rating": 9,
  "text": "–ü–æ—Ç—Ä—è—Å–∞—é—â–∏–π —Ñ–∏–ª—å–º!",
  "emotions": ["–í–æ—Å—Ç–æ—Ä–≥", "–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ"],
  "perception": {
    "plot": 9,
    "acting": 10,
    "visuals": 10,
    "soundtrack": 8
  }
}

// Response 201
{
  "id": 5678,
  "contentId": 1,
  "userId": 42,
  "rating": 9,
  "createdAt": "2025-11-20T10:30:00Z"
}
```

**POST /api/reviews/pro** üîí (Critic only)
```json
// Request
{
  "contentId": 1,
  "score": 85,
  "verdict": "positive",
  "text": "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ—Ü–µ–Ω–∑–∏—è...",
  "pros": ["–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã", "–ê–∫—Ç—ë—Ä—Å–∫–∞—è –∏–≥—Ä–∞"],
  "cons": ["–ó–∞—Ç—è–Ω—É—Ç–æ–µ –Ω–∞—á–∞–ª–æ"]
}

// Response 201
{
  "id": 9012,
  "contentId": 1,
  "criticId": 7,
  "score": 85,
  "verdict": "positive",
  "createdAt": "2025-11-20T11:00:00Z"
}
```

**GET /api/reviews/content/:contentId**
```
Query Parameters:
- type: user | critic | all (default: all)
- limit: number
- offset: number

Response 200:
{
  "reviews": [
    {
      "id": 5678,
      "user": {
        "id": 42,
        "username": "user123",
        "avatar": "https://..."
      },
      "rating": 9,
      "text": "–ü–æ—Ç—Ä—è—Å–∞—é—â–∏–π —Ñ–∏–ª—å–º!",
      "createdAt": "2025-11-20T10:30:00Z",
      "likes": 23
    }
  ],
  "total": 150,
  "average": 8.7
}
```

**GET /api/reviews/my** üîí
```
Response 200:
[
  {
    "id": 5678,
    "content": {
      "id": 1,
      "title": "–î—é–Ω–∞: –ß–∞—Å—Ç—å –≤—Ç–æ—Ä–∞—è"
    },
    "rating": 9,
    "createdAt": "2025-11-20T10:30:00Z"
  }
]
```

**DELETE /api/reviews/:id** üîí
```
Response 200:
{
  "message": "Review deleted successfully"
}
```

#### üë§ Users (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

**GET /api/users/me** üîí
```
Response 200:
{
  "id": 42,
  "username": "user123",
  "email": "user@example.com",
  "role": "user",
  "avatar": "https://...",
  "level": 5,
  "experience": 2340,
  "reviewsCount": 23,
  "createdAt": "2024-01-15T08:00:00Z"
}
```

**PATCH /api/users/me** üîí
```json
// Request
{
  "avatar": "https://...",
  "bio": "–ö–∏–Ω–æ–º–∞–Ω –∏ –≥–µ–π–º–µ—Ä"
}

// Response 200
{
  "id": 42,
  "username": "user123",
  "avatar": "https://...",
  "bio": "–ö–∏–Ω–æ–º–∞–Ω –∏ –≥–µ–π–º–µ—Ä"
}
```

**PATCH /api/users/me/password** üîí
```json
// Request
{
  "currentPassword": "OldPass123!",
  "newPassword": "NewPass456!"
}

// Response 200
{
  "message": "Password updated successfully"
}
```

**GET /api/users/me/level** üîí
```
Response 200:
{
  "level": 5,
  "experience": 2340,
  "nextLevelAt": 3000,
  "progress": 78
}
```

**GET /api/users/me/achievements** üîí
```
Response 200:
[
  {
    "id": 1,
    "name": "–ü–µ—Ä–≤—ã–π –æ—Ç–∑—ã–≤",
    "description": "–ù–∞–ø–∏—Å–∞—Ç—å –ø–µ—Ä–≤—ã–π –æ—Ç–∑—ã–≤",
    "icon": "üé¨",
    "unlocked": true,
    "unlockedAt": "2024-01-20T10:00:00Z"
  }
]
```

**GET /api/users/leaderboard**
```
Query Parameters:
- period: week | month | all (default: month)
- limit: number (default: 100)

Response 200:
[
  {
    "rank": 1,
    "user": {
      "id": 42,
      "username": "user123",
      "avatar": "https://..."
    },
    "experience": 15430,
    "level": 12,
    "reviewsCount": 156
  }
]
```

**GET /api/users/me/taste-profile** üîí
```
Response 200:
{
  "favoriteGenres": [
    { "genre": "Sci-Fi", "count": 45, "avgRating": 8.7 },
    { "genre": "Drama", "count": 32, "avgRating": 8.3 }
  ],
  "favoriteDirectors": [
    { "director": "–ö—Ä–∏—Å—Ç–æ—Ñ–µ—Ä –ù–æ–ª–∞–Ω", "count": 12, "avgRating": 9.1 }
  ],
  "ratingDistribution": {
    "10": 15,
    "9": 32,
    "8": 45,
    "7": 23
  },
  "emotionalProfile": {
    "dominant": "–í–æ—Å—Ç–æ—Ä–≥",
    "secondary": "–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ"
  }
}
```

**GET /api/users/me/recommendations** üîí
```
Query Parameters:
- limit: number (default: 20)

Response 200:
[
  {
    "id": 1,
    "title": "–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π —Ñ–∏–ª—å–º",
    "type": "movie",
    "matchScore": 92,
    "reason": "–ù–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –ª—é–±–∏–º—ã—Ö –∂–∞–Ω—Ä–æ–≤"
  }
]
```

#### üé≠ Critics (–ö—Ä–∏—Ç–∏–∫–∏)

**GET /api/critics**
```
Query Parameters:
- limit: number
- offset: number

Response 200:
[
  {
    "id": 7,
    "name": "–ò–≤–∞–Ω –ö—Ä–∏—Ç–∏–∫–æ–≤",
    "publication": "Film.ru",
    "avatar": "https://...",
    "reviewsCount": 234,
    "followersCount": 1543,
    "specialization": ["movies", "series"]
  }
]
```

**GET /api/critics/followed** üîí
```
Response 200:
[
  {
    "id": 7,
    "name": "–ò–≤–∞–Ω –ö—Ä–∏—Ç–∏–∫–æ–≤",
    "followedAt": "2024-05-12T14:00:00Z"
  }
]
```

**POST /api/critics/:id/follow** üîí
```
Response 200:
{
  "message": "Critic followed successfully"
}
```

**DELETE /api/critics/:id/follow** üîí
```
Response 200:
{
  "message": "Critic unfollowed successfully"
}
```

**GET /api/critics/personalized** üîí
```
Response 200:
{
  "averageRating": 8.3,
  "topCritics": [
    {
      "critic": { "id": 7, "name": "–ò–≤–∞–Ω –ö—Ä–∏—Ç–∏–∫–æ–≤" },
      "matchScore": 87,
      "commonTastes": ["Sci-Fi", "Drama"]
    }
  ]
}
```

#### üé® Hero Carousel (–ö–∞—Ä—É—Å–µ–ª—å –≥–µ—Ä–æ–µ–≤)

**GET /api/content/hero-carousel/active**
```
Response 200:
[
  {
    "id": 1,
    "content": {
      "id": 123,
      "title": "–î—é–Ω–∞: –ß–∞—Å—Ç—å –≤—Ç–æ—Ä–∞—è",
      "type": "movie"
    },
    "image": "https://...",
    "order": 1,
    "active": true
  }
]
```

**GET /api/content/hero-carousel/all** üîí (Admin only)
**POST /api/content/hero-carousel** üîí (Admin only)
**PUT /api/content/hero-carousel/:id** üîí (Admin only)
**DELETE /api/content/hero-carousel/:id** üîí (Admin only)

#### üîú Coming Soon (–°–∫–æ—Ä–æ –≤—ã–π–¥–µ—Ç)

**GET /api/content/coming-soon/active**
```
Response 200:
[
  {
    "id": 1,
    "title": "–ë—É–¥—É—â–∏–π —Ñ–∏–ª—å–º",
    "type": "movie",
    "releaseDate": "2025-12-15",
    "poster": "https://...",
    "hypeIndex": 95
  }
]
```

### –ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| 200 | OK - –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å |
| 201 | Created - –†–µ—Å—É—Ä—Å —Å–æ–∑–¥–∞–Ω |
| 400 | Bad Request - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å |
| 401 | Unauthorized - –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| 403 | Forbidden - –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω |
| 404 | Not Found - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω |
| 409 | Conflict - –ö–æ–Ω—Ñ–ª–∏–∫—Ç –¥–∞–Ω–Ω—ã—Ö |
| 422 | Unprocessable Entity - –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ |
| 500 | Internal Server Error - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |

### –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫

```json
{
  "statusCode": 400,
  "message": "Validation failed",
  "errors": [
    {
      "field": "email",
      "message": "Email is not valid"
    }
  ]
}
```

```json
{
  "statusCode": 401,
  "message": "Unauthorized",
  "error": "Invalid token"
}
```

---

## –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Winston –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å:
- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π —Ñ–∞–π–ª–æ–≤
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ —É—Ä–æ–≤–Ω—è–º (info, error, audit)
- –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–µ–π –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ request-id
- –ú–µ—Ç—Ä–∏–∫–∞–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```env
LOG_TO_FILES=true              # –í–∫–ª—é—á–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª—ã
LOG_DIR=./logs                 # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤
LOG_LEVEL=info                 # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (debug, info, warn, error)
LOG_RETENTION_DAYS_INFO=14     # –•—Ä–∞–Ω–µ–Ω–∏–µ info –ª–æ–≥–æ–≤ (–¥–Ω–∏)
LOG_RETENTION_DAYS_ERROR=30    # –•—Ä–∞–Ω–µ–Ω–∏–µ error –ª–æ–≥–æ–≤ (–¥–Ω–∏)
LOG_RETENTION_DAYS_AUDIT=90    # –•—Ä–∞–Ω–µ–Ω–∏–µ audit –ª–æ–≥–æ–≤ (–¥–Ω–∏)
```

### –§–∞–π–ª—ã –ª–æ–≥–æ–≤

**app-info-YYYY-MM-DD.log** ‚Äî –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
```json
{
  "timestamp": "2025-11-20T10:30:45.123Z",
  "level": "info",
  "message": "‚Üí GET /api/content/stats user=42 reqId=3f5a1b2a-9d8e-4f11-bf6d-5a0d1c1d8b0e"
}
{
  "timestamp": "2025-11-20T10:30:45.178Z",
  "level": "info",
  "message": "‚Üê GET /api/content/stats 200 55ms user=42 reqId=3f5a1b2a-9d8e-4f11-bf6d-5a0d1c1d8b0e"
}
```

**app-error-YYYY-MM-DD.log** ‚Äî –û—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
```json
{
  "timestamp": "2025-11-20T10:31:12.456Z",
  "level": "error",
  "message": "√ó GET /api/content/999 404 12ms user=42 reqId=7e9f3c4d-... msg=Content not found"
}
```

**audit-YYYY-MM-DD.log** ‚Äî –ê—É–¥–∏—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
```json
{
  "timestamp": "2025-11-20T10:32:00.789Z",
  "level": "info",
  "channel": "audit",
  "action": "CONTENT_DELETE",
  "userId": 1,
  "targetContentId": 123,
  "message": "Admin deleted content id=123"
}
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (PowerShell)

```powershell
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 50 —Å—Ç—Ä–æ–∫ info-–ª–æ–≥–æ–≤
Get-Content -Path ".\logs\app-info-2025-11-20.log" -Tail 50

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (tail -f)
Get-Content -Path ".\logs\app-info-2025-11-20.log" -Wait -Tail 200

# –ü–æ–∏—Å–∫ –ø–æ request-id
Select-String -Path ".\logs\app-info-*.log" -Pattern "reqId=3f5a1b2a"

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
Select-String -Path ".\logs\app-error-*.log" -Pattern "msg="

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞ –¥–µ–Ω—å
(Get-Content ".\logs\app-error-2025-11-20.log" | ConvertFrom-Json).Count
```

### Request ID correlation

–ö–∞–∂–¥—ã–π HTTP-–∑–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `request-id`:
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ –±–µ—Ä—ë—Ç—Å—è –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `x-request-id`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–µ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `x-request-id`
- –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–æ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ª–æ–≥-–∑–∞–ø–∏—Å—è—Ö

–ü—Ä–∏–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ —Å request-id:
```powershell
$rid = [guid]::NewGuid().ToString()
Invoke-RestMethod -Uri "http://localhost:8080/api/content/stats" `
  -Headers @{ "x-request-id" = $rid }
```

–ó–∞—Ç–µ–º –ø–æ–∏—Å–∫ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π —ç—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:
```powershell
Select-String -Path ".\logs\app-info-*.log" -Pattern "reqId=$rid"
```

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –¢–∞–±–ª–∏—Ü–∞: content
```sql
CREATE TABLE content (
  id INT PRIMARY KEY AUTO_INCREMENT,
  title VARCHAR(255) NOT NULL,
  type ENUM('movie', 'series', 'game') NOT NULL,
  year INT,
  description TEXT,
  rating DECIMAL(3,1),
  metascore INT,
  user_score DECIMAL(3,1),
  director VARCHAR(255),
  director_photo_url VARCHAR(500),
  cast JSON,
  cast_photos JSON,
  genres JSON,
  poster_url VARCHAR(500),
  backdrop_url VARCHAR(500),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  positive_reviews INT DEFAULT 0,
  mixed_reviews INT DEFAULT 0,
  negative_reviews INT DEFAULT 0,
  INDEX idx_type (type),
  INDEX idx_year (year),
  INDEX idx_rating (rating),
  FULLTEXT idx_title (title)
);
```

#### –¢–∞–±–ª–∏—Ü–∞: users
```sql
CREATE TABLE users (
  id INT PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  password VARCHAR(255) NOT NULL,
  role ENUM('user', 'critic', 'admin') DEFAULT 'user',
  avatar VARCHAR(500),
  bio TEXT,
  level INT DEFAULT 1,
  experience INT DEFAULT 0,
  is_active BOOLEAN DEFAULT TRUE,
  is_verified BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_username (username),
  INDEX idx_email (email)
);
```

#### –¢–∞–±–ª–∏—Ü–∞: reviews
```sql
CREATE TABLE reviews (
  id INT PRIMARY KEY AUTO_INCREMENT,
  content_id INT NOT NULL,
  user_id INT NOT NULL,
  rating INT CHECK (rating BETWEEN 1 AND 10),
  text TEXT,
  emotions JSON,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (content_id) REFERENCES content(id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  INDEX idx_content (content_id),
  INDEX idx_user (user_id)
);
```

#### –¢–∞–±–ª–∏—Ü–∞: ratings
```sql
CREATE TABLE ratings (
  id INT PRIMARY KEY AUTO_INCREMENT,
  content_id INT NOT NULL,
  user_id INT NOT NULL,
  rating INT CHECK (rating BETWEEN 1 AND 10),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (content_id) REFERENCES content(id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  UNIQUE KEY unique_user_content (user_id, content_id),
  INDEX idx_content (content_id)
);
```

### –•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

#### add_review_viewer
–î–æ–±–∞–≤–ª—è–µ—Ç –æ—Ç–∑—ã–≤ –∑—Ä–∏—Ç–µ–ª—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥.

```sql
CALL add_review_viewer(
  p_content_id INT,
  p_user_id INT,
  p_rating INT,
  p_text TEXT,
  p_emotions JSON
);
```

#### publish_pro_review
–ü—É–±–ª–∏–∫—É–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é —Ä–µ—Ü–µ–Ω–∑–∏—é –∫—Ä–∏—Ç–∏–∫–∞.

```sql
CALL publish_pro_review(
  p_content_id INT,
  p_critic_id INT,
  p_score INT,
  p_verdict ENUM('positive', 'mixed', 'negative'),
  p_text TEXT
);
```

#### RecalculateMovieRatings
–ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

```sql
CALL RecalculateMovieRatings(p_content_id INT);
```

### –¢—Ä–∏–≥–≥–µ—Ä—ã

#### after_review_insert
```sql
CREATE TRIGGER after_review_insert
AFTER INSERT ON reviews
FOR EACH ROW
BEGIN
  CALL RecalculateMovieRatings(NEW.content_id);
END;
```

#### after_rating_insert
```sql
CREATE TRIGGER after_rating_insert
AFTER INSERT ON ratings
FOR EACH ROW
BEGIN
  UPDATE users
  SET experience = experience + 10
  WHERE id = NEW.user_id;
END;
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```powershell
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
mysqldump -u root -p warehouse > backup_2025-11-20.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
mysql -u root -p warehouse < backup_2025-11-20.sql

# –ë—ç–∫–∞–ø —Ç–æ–ª—å–∫–æ —Å—Ö–µ–º—ã (–±–µ–∑ –¥–∞–Ω–Ω—ã—Ö)
mysqldump -u root -p --no-data warehouse > schema_only.sql
```

---

## –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω–≤–µ–π–µ—Ä–∞

```
Backend ‚Üí Kafka ‚Üí PySpark ‚Üí ClickHouse ‚Üí Dashboard
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

#### 1. –ó–∞–ø—É—Å–∫ Docker Compose

```powershell
cd analytics
docker-compose up -d
```

#### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```powershell
# Kafka
docker-compose ps kafka

# ClickHouse
curl http://localhost:8123/ping

# Zookeeper
docker-compose logs zookeeper
```

#### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ ClickHouse

```sql
CREATE TABLE analytics.user_activity_log (
  timestamp DateTime,
  user_id UInt32,
  action String,
  content_id UInt32,
  content_type Enum8('movie'=1, 'series'=2, 'game'=3),
  session_id String,
  ip_address String,
  user_agent String
) ENGINE = MergeTree()
PARTITION BY toYYYYMM(timestamp)
ORDER BY (timestamp, user_id);

CREATE TABLE analytics.content_views (
  date Date,
  content_id UInt32,
  views UInt64,
  unique_users UInt64
) ENGINE = SummingMergeTree()
PARTITION BY toYYYYMM(date)
ORDER BY (date, content_id);
```

#### 4. –ó–∞–ø—É—Å–∫ PySpark –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞

```powershell
cd analytics/pyspark
pip install -r requirements.txt
python stream_to_clickhouse.py
```

### –°–æ–±—ã—Ç–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

Backend –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤ Kafka:

```typescript
// services/content.service.ts
async publishEvent(event: {
  action: string;
  userId: number;
  contentId: number;
  metadata?: any;
}) {
  await this.kafkaClient.send({
    topic: 'user-events',
    messages: [{
      value: JSON.stringify({
        timestamp: new Date().toISOString(),
        ...event
      })
    }]
  });
}
```

### –ó–∞–ø—Ä–æ—Å—ã –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ

```sql
-- –¢–æ–ø-10 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
SELECT
  content_id,
  sum(views) as total_views,
  sum(unique_users) as total_users
FROM analytics.content_views
WHERE date >= today() - 7
GROUP BY content_id
ORDER BY total_views DESC
LIMIT 10;

-- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —á–∞—Å–∞–º
SELECT
  toHour(timestamp) as hour,
  count() as events
FROM analytics.user_activity_log
WHERE timestamp >= now() - INTERVAL 1 DAY
GROUP BY hour
ORDER BY hour;
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**JWT Tokens:**
- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 7 –¥–Ω–µ–π (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `JWT_EXPIRES`)
- –•—Ä–∞–Ω—è—Ç—Å—è –≤ `localStorage` –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- –ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer <token>`

**–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞:**
```typescript
// Guards –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ç–æ–∫–µ–Ω –Ω–∞ –∫–∞–∂–¥–æ–º –∑–∞—â–∏—â—ë–Ω–Ω–æ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ
@UseGuards(JwtAuthGuard)
@Get('protected')
getProtectedResource(@Request() req) {
  // req.user —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–æ–∫–µ–Ω–∞
  return req.user;
}
```

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (RBAC)

**–†–æ–ª–∏:**
- `user` ‚Äî –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤—ã, —Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫–∏)
- `critic` ‚Äî –∫—Ä–∏—Ç–∏–∫ (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–µ—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ—Ü–µ–Ω–∑–∏–∏)
- `admin` ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø, –≤–∫–ª—é—á–∞—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π:**
```typescript
@UseGuards(JwtAuthGuard, RolesGuard)
@Roles(UserRole.ADMIN)
@Delete(':id')
deleteContent(@Param('id') id: number) {
  return this.contentService.deleteContent(id);
}
```

### –ó–∞—â–∏—Ç–∞ –ø–∞—Ä–æ–ª–µ–π

- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ: **bcrypt** —Å —Å–æ–ª—å—é (10 —Ä–∞—É–Ω–¥–æ–≤)
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ API

```typescript
import * as bcrypt from 'bcrypt';

// –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
const hash = await bcrypt.hash(password, 10);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ
const isValid = await bcrypt.compare(password, user.password);
```

### CORS

```typescript
// main.ts
app.enableCors({
  origin: (process.env.CORS_ORIGINS || 'http://localhost:5173')
    .split(',')
    .map(s => s.trim()),
  credentials: true
});
```

**–ü—Ä–æ–¥–∞–∫—à–Ω:**
```env
CORS_ORIGINS=https://cinemahub.com,https://www.cinemahub.com
```

### SQL Injection Protection

- **TypeORM** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

```typescript
// ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ (TypeORM)
await this.contentRepository.findOne({ where: { id } });

// ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
await this.connection.query(
  'CALL add_review_viewer(?, ?, ?, ?, ?)',
  [contentId, userId, rating, text, emotions]
);

// ‚ùå –û–ø–∞—Å–Ω–æ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ!)
await this.connection.query(
  `SELECT * FROM users WHERE username = '${username}'`
);
```

### Rate Limiting

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@nestjs/throttler`:

```typescript
import { ThrottlerModule } from '@nestjs/throttler';

@Module({
  imports: [
    ThrottlerModule.forRoot({
      ttl: 60,      // 60 —Å–µ–∫—É–Ω–¥
      limit: 100    // 100 –∑–∞–ø—Ä–æ—Å–æ–≤
    })
  ]
})
```

### XSS Protection

- Frontend: React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –≤—ã–≤–æ–¥
- Backend: –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `class-validator`

```typescript
import { IsString, IsNotEmpty, MaxLength } from 'class-validator';

export class CreateReviewDto {
  @IsString()
  @IsNotEmpty()
  @MaxLength(5000)
  text: string;
}
```

---

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Development (–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

```powershell
# Backend
cd movie-aggregator-backend-nest
npm run start:dev

# Frontend
cd movie-aggregator-frontend
npm run dev
```

**URLs:**
- Frontend: http://localhost:5173
- Backend API: http://localhost:8080
- Swagger: http://localhost:8080/swagger

### Production (–ü—Ä–æ–¥–∞–∫—à–Ω)

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Ubuntu 20.04+ / Debian 11+ / CentOS 8+
- Node.js 18+
- MySQL 8.0+
- Nginx
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)

#### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# Node.js
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# MySQL
sudo apt-get install mysql-server
sudo mysql_secure_installation

# Nginx
sudo apt-get install nginx

# PM2 (–ø—Ä–æ—Ü–µ—Å—Å-–º–µ–Ω–µ–¥–∂–µ—Ä)
sudo npm install -g pm2
```

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MySQL

```sql
CREATE DATABASE warehouse CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'cinemahub'@'localhost' IDENTIFIED BY 'strong_password';
GRANT ALL PRIVILEGES ON warehouse.* TO 'cinemahub'@'localhost';
FLUSH PRIVILEGES;
```

#### 4. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Backend

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/your-org/cinemahub.git
cd cinemahub/movie-aggregator-backend-nest

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm ci --production

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
cp .env.example .env
nano .env

# –°–æ–±—Ä–∞—Ç—å
npm run build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å PM2
pm2 start dist/main.js --name cinemahub-api
pm2 save
pm2 startup
```

#### 5. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Frontend

```bash
cd ../movie-aggregator-frontend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm ci

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
echo "VITE_API_URL=https://api.cinemahub.com" > .env

# –°–æ–±—Ä–∞—Ç—å
npm run build

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ Nginx
sudo cp -r dist/* /var/www/cinemahub/
```

#### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

```nginx
# /etc/nginx/sites-available/cinemahub
server {
    listen 80;
    server_name cinemahub.com www.cinemahub.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name cinemahub.com www.cinemahub.com;

    ssl_certificate /etc/letsencrypt/live/cinemahub.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/cinemahub.com/privkey.pem;

    root /var/www/cinemahub;
    index index.html;

    # Frontend (SPA)
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Backend API
    location /api {
        proxy_pass http://localhost:8080;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    # Gzip
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
}
```

```bash
# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo ln -s /etc/nginx/sites-available/cinemahub /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

#### 7. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

```bash
sudo apt-get install certbot python3-certbot-nginx
sudo certbot --nginx -d cinemahub.com -d www.cinemahub.com
```

#### 8. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –õ–æ–≥–∏ PM2
pm2 logs cinemahub-api

# –°—Ç–∞—Ç—É—Å
pm2 status

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
pm2 monit

# –õ–æ–≥–∏ Nginx
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log
```

### Docker (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

#### docker-compose.yml

```yaml
version: '3.8'

services:
  backend:
    build: ./movie-aggregator-backend-nest
    ports:
      - "8080:8080"
    environment:
      - NODE_ENV=production
      - DB_HOST=mysql
      - DB_PORT=3306
      - DB_USER=cinemahub
      - DB_PASS=password
      - DB_NAME=warehouse
    depends_on:
      - mysql
    volumes:
      - ./logs:/app/logs

  frontend:
    build: ./movie-aggregator-frontend
    ports:
      - "80:80"
    depends_on:
      - backend

  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: warehouse
      MYSQL_USER: cinemahub
      MYSQL_PASSWORD: password
    volumes:
      - mysql_data:/var/lib/mysql
      - ./database:/docker-entrypoint-initdb.d

volumes:
  mysql_data:
```

```bash
docker-compose up -d
```

---

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `Error: Cannot find module`
```bash
# –†–µ—à–µ–Ω–∏–µ: –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
rm -rf node_modules package-lock.json
npm install
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `ER_ACCESS_DENIED_ERROR: Access denied for user`
```bash
# –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å credentials –≤ .env
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞
mysql -u root -p
SHOW GRANTS FOR 'cinemahub'@'localhost';
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `Port 8080 is already in use`
```bash
# –†–µ—à–µ–Ω–∏–µ: –Ω–∞–π—Ç–∏ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
netstat -ano | findstr :8080
taskkill /PID <PID> /F

# –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç –≤ .env
PORT=8081
```

### Frontend –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Backend

**–ü—Ä–æ–±–ª–µ–º–∞:** `Network Error` –∏–ª–∏ CORS
```javascript
// –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å VITE_API_URL –≤ .env
VITE_API_URL=http://localhost:8080

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS –≤ backend .env
CORS_ORIGINS=http://localhost:5173,http://localhost:5174
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** `Error: Connection lost: The server closed the connection`
```sql
-- –†–µ—à–µ–Ω–∏–µ: —É–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã
SET GLOBAL connect_timeout=600;
SET GLOBAL wait_timeout=600;
SET GLOBAL interactive_timeout=600;
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –•—Ä–∞–Ω–∏–º–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
```sql
-- –†–µ—à–µ–Ω–∏–µ: –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
SOURCE database/viewer-user-procedures.sql;
SOURCE database/critic-procedures.sql;
SOURCE database/triggers-procedures.sql;
```

### –õ–æ–≥–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
```bash
# –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –ø–∞–ø–∫—É
mkdir logs
chmod 755 logs

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
LOG_TO_FILES=true
LOG_DIR=./logs
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ
```env
# –†–µ—à–µ–Ω–∏–µ: —É–º–µ–Ω—å—à–∏—Ç—å retention –∏–ª–∏ —É—Ä–æ–≤–µ–Ω—å
LOG_LEVEL=warn
LOG_RETENTION_DAYS_INFO=7
```

### Performance

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
```sql
-- –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_content_type ON content(type);
CREATE INDEX idx_content_year ON content(year);
CREATE INDEX idx_reviews_content ON reviews(content_id);

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
SHOW PROCESSLIST;
SELECT * FROM information_schema.processlist WHERE time > 5;
```

### JWT

**–ü—Ä–æ–±–ª–µ–º–∞:** `Token expired` –∏–ª–∏ `Invalid token`
```typescript
// –†–µ—à–µ–Ω–∏–µ: –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω
// Frontend –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ /login

// –ò–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
JWT_EXPIRES=30d
```

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://github.com/your-org/cinemahub/wiki  
**Issues:** https://github.com/your-org/cinemahub/issues  
**Email:** support@cinemahub.com

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 20 –Ω–æ—è–±—Ä—è 2025
